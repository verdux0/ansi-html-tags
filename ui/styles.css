:root {
  --bg-dark: #121212;
  --panel-dark: #1e1e1e;
  --border-dark: #333;
  --bg-light: #f5f5f7;
  --panel-light: #ffffff;
  --border-light: #cfd2d7;
  --accent: #ff9800;
  --accent-alt: #ffb547;
  --text-dark: #e0e0e0;
  --text-light: #222;
  --radius: 6px;
  --focus-ring: 2px solid var(--accent);
  --mono: ui-monospace, SFMono-Regular, Menlo, Consolas, "Courier New", monospace;
}

body.theme-dark {
  --bg: var(--bg-dark);
  --panel: var(--panel-dark);
  --border: var(--border-dark);
  --text: var(--text-dark);
  --shadow: 0 2px 6px rgba(0,0,0,0.4);
}

body.theme-light {
  --bg: var(--bg-light);
  --panel: var(--panel-light);
  --border: var(--border-light);
  --text: var(--text-light);
  --shadow: 0 2px 6px rgba(0,0,0,0.08);
}

* { box-sizing: border-box; }
body {
  margin:0; font-family: system-ui, sans-serif;
  background: var(--bg); color: var(--text);
  display:flex; flex-direction:column; min-height:100vh;
  transition: background .25s, color .25s;
}

.toolbar {
  display:flex; flex-wrap:wrap; gap:0.75rem; padding:0.75rem 1rem;
  background: var(--panel); border-bottom:1px solid var(--border);
  position:sticky; top:0; z-index:10;
  box-shadow: var(--shadow);
}
.toolbar .group { display:flex; align-items:center; gap:0.5rem; }
.label { font-size:0.75rem; opacity:0.7; letter-spacing:.5px; text-transform:uppercase; }

.color-buttons { display:flex; gap:4px; flex-wrap:wrap; max-width:600px; }
.color-btn {
  width:30px; height:30px; border:none; cursor:pointer; border-radius:4px;
  outline:1px solid #444; position:relative; padding:0; font-size:0.65rem;
  display:flex; align-items:center; justify-content:center;
  font-weight:600; color:#000;
  transition: transform .15s, outline-color .15s, filter .15s;
}
body.theme-light .color-btn { outline-color:#999; }
.color-btn:hover:not([disabled]) { outline-color: var(--accent); transform: translateY(-2px); }
.color-btn:active:not([disabled]) { transform: scale(.93); }
.color-btn[disabled] { filter: grayscale(.85) brightness(.7); cursor:not-allowed; position:relative; }
.color-btn[disabled]::after {
  content:"Ã—"; position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  font-size:0.9rem; font-weight:700; color:#fff;
  background: rgba(0,0,0,0.55);
}

.primary, .secondary, .mode-btn {
  background:#2a2a2a; color:var(--text); border:1px solid var(--border);
  padding:0.45rem 0.9rem; border-radius: var(--radius); cursor:pointer;
  font-size:0.75rem; letter-spacing:.5px; text-transform:uppercase;
  transition: background .2s, color .2s, border-color .2s;
}
body.theme-light .primary, body.theme-light .secondary, body.theme-light .mode-btn {
  background:#f0f2f5; color:#222; border-color: var(--border);
}
.primary { background: var(--accent); border-color: var(--accent); color:#000; font-weight:700; }
.primary:disabled { opacity:0.45; cursor:not-allowed; }
.mode-btn.active { background: var(--accent); color:#000; }
.secondary:hover { background: var(--accent-alt); color:#000; }

.workspace {
  display:flex; flex:1; gap:1rem; padding:1rem; flex-wrap:wrap;
}

.editor { flex:2 1 520px; display:flex; flex-direction:column; gap:0.5rem; }

.editor-header { display:flex; justify-content:space-between; align-items:center; }
.status { font-size:0.65rem; opacity:.7; padding:2px 6px; border:1px solid var(--border); border-radius:4px; }

.editable {
  min-height:340px; padding:1rem; background: var(--panel);
  border:1px solid var(--border); border-radius: var(--radius);
  overflow:auto; line-height:1.35;
  transition: background .25s, color .25s, border-color .25s;
  white-space:pre-wrap;
}
.editable:focus { outline: var(--focus-ring); }
.editable span[data-color] { padding:0 2px; border-radius:2px; }

.monospace { font-family: var(--mono); font-size:0.9rem; }

.code-view {
  display:block; width:100%; min-height:340px; resize:vertical;
  background: #0d0d0d; color:#ffd;
  font-family: var(--mono); font-size:0.85rem;
  padding:1rem; border:1px solid var(--border); border-radius: var(--radius);
  line-height:1.3; tab-size:2; white-space:pre;
}
body.theme-light .code-view {
  background:#272b30; color:#fffae3; border-color:#1d1f22;
}

.help {
  flex:1 1 260px; background: var(--panel); border:1px solid var(--border);
  padding:0.75rem 1rem; border-radius: var(--radius); font-size:0.8rem;
  max-height:360px; overflow:auto; line-height:1.3;
  box-shadow: var(--shadow);
  transition: background .25s, border-color .25s;
}
.help h3 { margin-top:0; font-size:0.9rem; letter-spacing:.5px; text-transform:uppercase; }

.footer {
  text-align:center; padding:0.6rem; font-size:0.65rem;
  background: var(--panel); border-top:1px solid var(--border);
}

::-webkit-scrollbar { width:10px; }
::-webkit-scrollbar-thumb { background:#333; border-radius:5px; }
::-webkit-scrollbar-thumb:hover { background:#444; }
body.theme-light ::-webkit-scrollbar-thumb { background:#bbb; }
body.theme-light ::-webkit-scrollbar-thumb:hover { background:#999; }

@media (max-width:820px) {
  .help { flex:1 1 100%; order:3; max-height:none; }
  .editor { flex:1 1 100%; }
}